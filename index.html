<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Selective Precipitation</title>

<style>
  * { font-family: Arial, sans-serif; }
  body { margin: 20px; }

  /* ===== TOP ROW ===== */
  .title-row { display:flex; align-items:center; gap:20px; margin-bottom:20px; }
  h1 { font-size:32px; font-weight: bold; margin:0; } /* ONLY CHANGE */
  .toggle-row { display:flex; align-items:center; gap:15px; }

  /* ===== MAIN LAYOUT ===== */
  .main-container { display:flex; gap:20px; align-items:flex-start; }

  :root{
    --sectionH: 480px;
    --section1W: 520px;
    --section2W: 450px;
  }

  .section{
    border: 1px solid #ccc;
    padding: 15px;
    box-sizing: border-box;
    height: var(--sectionH);
  }

  /* ===== SECTION 1 ===== */
  .section-1{
    width: var(--section1W);
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    gap: 10px;
  }

  .s1-toptext{ line-height: 1.2; }
  .s1-toptext .line { margin: 0; }

  .s1-bottomtext{
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
    gap: 12px;
  }

  .s1-bottom-lefttext{
    line-height: 1.0;
    white-space: nowrap;
  }
  .s1-bottom-lefttext div{
    margin: 0;
    padding: 0;
  }

  .slider-row{
    display:flex;
    align-items:center;
    justify-content:flex-start;
    gap: 10px;
    width: 100%;
  }
  .slider-row .slider-plus{
    font-size: 28px;
    line-height: 1;
    user-select:none;
  }
  #sliderA{
    width: 320px;
    margin-left: 10px;
  }

  /* ===== BEAKER AREA ===== */
  .beaker-stage{
    position: relative;
    flex: 1;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height: 260px;
  }

  .beaker{
    position: relative;
    width: 210px;
    height: 220px;
  }

  .beaker .wall-left,
  .beaker .wall-right{
    position:absolute; top:0; bottom:0;
    width:4px; background:black;
  }
  .beaker .wall-left{ left:0; }
  .beaker .wall-right{ right:0; }
  .beaker .wall-bottom{
    position:absolute; left:0; right:0; bottom:0;
    height:4px; background:black;
  }
  .beaker .liquid-line{
    position:absolute; left:0; right:0;
    top:40%;
    height:4px; background:black;
  }

  .objectA, .objectB{
    position:absolute;
    bottom: 18px;
    border: 4px solid black;
    border-radius: 50%;
    background: transparent;
    display:none;
  }

  .obj-label{
    position:absolute;
    white-space: nowrap;
    font-size: 14px;
    display:none;
    transform: translateX(-50%);
  }

  #objectA, #labelA{
    left: 55px;
    transform: translateX(-50%);
  }
  #objectB, #labelB{
    left: 155px;
    transform: translateX(-50%);
  }

  /* ===== SECTION 2 ===== */
  .section-2{
    width: var(--section2W);
    display:none;
  }

  .s2-toptext{
    display:flex;
    justify-content:space-between;
    gap: 10px;
    line-height:1.2;
    margin-bottom: 10px;
  }

  .s2-col{ width: 48%; }
  .s2-col .line{ margin:0; }

  .graph-vertical-area{
    display:flex;
    align-items:flex-end;
    justify-content:center;
    gap: 24px;
    height: calc(var(--sectionH) - 110px);
  }

  .vcol{ width: 90px; text-align:center; }
  .bar-vertical{
    width: 38px;
    margin: 0 auto;
    box-sizing:border-box;
    height: 0;
  }
  #barC{ background:black; }
  #barD{ background:#aaa; border:2px solid black; }
  #barE{ background:white; border:2px solid black; }

  .graph-label{
    font-size: 12px;
    white-space: nowrap;
    margin-top: 6px;
  }

  #textQ, #textS { font-weight: bold; }
</style>
</head>

<body>

<div class="title-row">
  <h1 id="textTITLE">Selective Precipitation</h1>
  <div class="toggle-row">
    <label>
      <input type="checkbox" id="toggleSection2">
      Show bar graph
    </label>
  </div>
</div>

<div class="main-container">

  <!-- SECTION 1 -->
  <div class="section section-1" id="section1">

    <div class="s1-toptext">
      <p class="line" id="textA">What will be observed when KF(s) is continually added to the</p>
      <p class="line" id="textB">solution containing Ca²⁺(aq) and Ba²⁺(aq)?</p>
    </div>

    <div class="beaker-stage">
      <div class="beaker" id="beaker">
        <div class="wall-left"></div>
        <div class="wall-right"></div>
        <div class="wall-bottom"></div>
        <div class="liquid-line"></div>

        <div class="objectA" id="objectA"></div>
        <div class="obj-label" id="labelA">CaF₂(s) ppt</div>

        <div class="objectB" id="objectB"></div>
        <div class="obj-label" id="labelB">BaF₂(s) ppt</div>
      </div>
    </div>

    <div class="s1-bottomtext">
      <div class="s1-bottom-lefttext">
        <div id="textC">amount of</div>
        <div id="textD">KF(s) added</div>
      </div>

      <div class="slider-row">
        <div class="slider-plus" id="sliderPlus">+</div>
        <input type="range" id="sliderA" min="0" max="20" step="1" value="0" />
      </div>
    </div>

  </div>

  <!-- SECTION 2 -->
  <div class="section section-2" id="section2">
    <div class="s2-toptext">
      <div class="s2-col">
        <p class="line" id="textP">At equilibrium...</p>
        <p class="line" id="textQ"></p>
      </div>
      <div class="s2-col" style="text-align:right;">
        <p class="line" id="textR">&nbsp;</p>
        <p class="line" id="textS"></p>
      </div>
    </div>

    <div class="graph-vertical-area">
      <div class="vcol">
        <div class="bar-vertical" id="barC"></div>
        <div class="graph-label" id="textF">[Ca²⁺(aq)]</div>
      </div>
      <div class="vcol">
        <div class="bar-vertical" id="barD"></div>
        <div class="graph-label" id="textG">[F⁻(aq)]</div>
      </div>
      <div class="vcol">
        <div class="bar-vertical" id="barE"></div>
        <div class="graph-label" id="textH">[Ba²⁺(aq)]</div>
      </div>
    </div>
  </div>

</div>

<script>
  /**************************************************************
   * UPDATED VALUES (from latest table in your image)
   **************************************************************/
  const graphCData = [
    10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 9.4, 8.7, 8.1, 7.6, 7.1,
     6.6,  6.1,  5.7,  5.4,  5.0, 4.7, 4.4, 4.2, 4.0, 3.8
  ];

  const graphDData = [
     0.0,  1.0,  2.0,  3.0,  4.0,  5.0, 5.4, 5.7, 6.1, 6.6, 7.1,
     7.6,  8.1,  8.7,  9.4, 10.0, 10.7, 11.4, 12.1, 12.9, 13.7
  ];

  const graphEData = [
    10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0,
    10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0,  9.3,  8.6,  7.9
  ];

  const objectAData = [
    0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.7, 1.3, 1.9, 2.4, 2.9,
    3.4, 3.9, 4.3, 4.7, 5.0, 5.3, 5.6, 5.9, 6.1, 6.3
  ];

  const objectBData = [
    0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
    0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.5, 1.0, 1.5
  ];

  /**************************************************************
   * SCALING
   **************************************************************/
  const MAX_BAR_PX = 200;
  const MAX_VAL    = 13.7;
  const BAR_HEIGHT_SCALE = 1.3;

  const OBJECT_A_PX_MULTIPLIER = 14;
  const OBJECT_B_PX_MULTIPLIER = 14;

  /**************************************************************
   * ELEMENTS
   **************************************************************/
  const sliderA = document.getElementById("sliderA");
  const toggleSection2 = document.getElementById("toggleSection2");
  const section2 = document.getElementById("section2");

  const barC = document.getElementById("barC");
  const barD = document.getElementById("barD");
  const barE = document.getElementById("barE");

  const objectA = document.getElementById("objectA");
  const objectB = document.getElementById("objectB");
  const labelA = document.getElementById("labelA");
  const labelB = document.getElementById("labelB");

  const textQ = document.getElementById("textQ");
  const textS = document.getElementById("textS");

  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  function setLine(el, msg, color){
    el.textContent = msg;
    el.style.color = color;
    el.style.fontWeight = "bold";
  }

  /**************************************************************
   * TEXT RULES
   **************************************************************/
  const CA_LT = "[Ca²⁺][F⁻]² < Kₛₚ of CaF₂";
  const CA_EQ = "[Ca²⁺][F⁻]² = Kₛₚ of CaF₂";

  const BA_LT = "[Ba²⁺][F⁻]² < Kₛₚ of BaF₂";
  const BA_EQ = "[Ba²⁺][F⁻]² = Kₛₚ of BaF₂";

  function updateTextForSlider(v){
    if (v >= 0 && v <= 4) setLine(textQ, CA_LT, "black");
    else if (v === 5)     setLine(textQ, CA_EQ, "black");
    else                  setLine(textQ, CA_EQ, "red");

    if (v >= 0 && v <= 16) setLine(textS, BA_LT, "black");
    else if (v === 17)     setLine(textS, BA_EQ, "black");
    else                   setLine(textS, BA_EQ, "red");
  }

  function update(v){
    const idx = clamp(Math.round(v), 0, 20);

    barC.style.height = ((graphCData[idx] / MAX_VAL) * MAX_BAR_PX * BAR_HEIGHT_SCALE) + "px";
    barD.style.height = ((graphDData[idx] / MAX_VAL) * MAX_BAR_PX * BAR_HEIGHT_SCALE) + "px";
    barE.style.height = ((graphEData[idx] / MAX_VAL) * MAX_BAR_PX * BAR_HEIGHT_SCALE) + "px";

    const aUnits = objectAData[idx];
    const bUnits = objectBData[idx];

    const aPx = aUnits * OBJECT_A_PX_MULTIPLIER;
    const bPx = bUnits * OBJECT_B_PX_MULTIPLIER;

    if (aUnits > 0) {
      objectA.style.width = aPx + "px";
      objectA.style.height = aPx + "px";
      objectA.style.display = "block";
      labelA.style.bottom = (18 + aPx + 10) + "px";
      labelA.style.display = "block";
    } else {
      objectA.style.display = "none";
      labelA.style.display = "none";
    }

    if (bUnits > 0) {
      objectB.style.width = bPx + "px";
      objectB.style.height = bPx + "px";
      objectB.style.display = "block";
      labelB.style.bottom = (18 + bPx + 10) + "px";
      labelB.style.display = "block";
    } else {
      objectB.style.display = "none";
      labelB.style.display = "none";
    }

    updateTextForSlider(idx);
  }

  toggleSection2.addEventListener("change", (e) => {
    section2.style.display = e.target.checked ? "block" : "none";
  });

  sliderA.addEventListener("input", (e) => update(+e.target.value));
  window.addEventListener("resize", () => update(+sliderA.value || 0));

  update(+sliderA.value || 0);
</script>

</body>
</html>
